{% extends "base.html" %}
{% block title %}Module 4 • Task 1 — Image Stitching{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='module4/style.css') }}">
{% endblock %}

{% block content %}
<div id="wrap">
  <div class="page-head" style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
    <h1 class="h1">Task 1: Image Stitching</h1>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a class="btn" href="{{ url_for('module_4') }}">← Back to Module 4</a>
      <a class="btn ghost" href="{{ url_for('dashboard') }}">Main Dashboard</a>
    </div>
  </div>

  <section class="card">
    <p class="muted">
      Upload <strong>4+ landscape</strong> or <strong>8+ portrait</strong> images with ~40–60% overlap.
    </p>

    <form method="post" enctype="multipart/form-data">
      <label class="label" for="images">Select multiple images (JPG/PNG/WEBP)</label>
      <input id="images" class="file" type="file" name="images" accept="image/*" multiple required>
      <button class="btn" type="submit">Stitch</button>
    </form>

    {% if notes %}
      <div class="flash" style="margin-top:12px">
        {% for n in notes %}
          <div class="flash-item">{{ n }}</div>
        {% endfor %}
      </div>
    {% endif %}
  </section>

  {% if result_rel %}
  <section class="results">
    <div class="card img-card">
      <div class="img-title">Stitched Panorama</div>
      <img src="{{ url_for('mod4_file', rel=result_rel) }}" alt="stitched panorama"
           style="max-width:100%;border:1px solid #444;border-radius:8px;">
    </div>
  </section>
  {% endif %}
</div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='module4/main.js') }}"></script>
{% endblock %}