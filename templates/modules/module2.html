{% extends "base.html" %}
{% block title %}Module 2 — Detect • Blur • Deblur{% endblock %}

{% block content %}
<div id="wrap">
  <h1>Module 2 — Detect • Blur • Deblur</h1>

  <section class="card">
    <h2>1) Upload</h2>
    <div class="row">
      <input type="file" id="baseFile" accept="image/*">
      <button id="uploadBaseBtn" class="btn">Upload Base Image</button>
    </div>
    <div class="row">
      <input type="file" id="tmplFile" accept="image/*">
      <button id="uploadTmplBtn" class="btn">Upload Template</button>
    </div>
    <div class="muted" id="uploadStatus"></div>
  </section>

  <section class="card">
    <h2>2) Detect</h2>
    <div class="row">
      <button id="detectBtn" class="btn">Detect Best Match</button>
    </div>
    <img id="detPreview" alt="detection preview"
         style="max-width:100%; border:1px solid #444; border-radius:8px; display:none;">
  </section>

  <section class="card">
    <h2>3) Blur • 4) Deblur</h2>
    <div class="row">
      <label>σ (Sigma):</label>
      <input type="number" id="sigmaInput" value="2.0" step="0.1" style="width:120px;">
      <button id="blurBtn" class="btn">Blur ROI</button>
      <button id="deblurBtn" class="btn">Deblur ROI</button>
    </div>
    <img id="procPreview" alt="processed preview"
         style="max-width:100%; border:1px solid #444; border-radius:8px; display:none;">
    <p class="muted" style="margin-top:6px;">
      Deblur reuses the same σ/ksize/pad saved during Blur.
    </p>
  </section>

  <div class="row" style="margin-top:12px;">
    <a class="btn" href="{{ url_for('dashboard') }}">← Back to Dashboard</a>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='module2/main.js') }}"></script>
{% endblock %}